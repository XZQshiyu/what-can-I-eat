<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>菜品评价</title>
  <style>
    a {
      z-index: 9999999999;
      position: fixed;
      top: 20px;
      right: 50px;
    }

    a:hover {
      /* 改变颜色 */
      color: rgb(156, 255, 240);
      /* 增大尺寸 */
      transform: scale(1.2);
      /* 添加阴影 */
      box-shadow: 0 0 5px rgba(175, 175, 175, 0.5);
    }

    img {
      width: 30px;
      height: 30px;
    }

    /* 回到顶部 */
    #backToTop {
      display: none;
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: rgb(182, 183, 183);
      border: none;
      color: white;
      padding: 10px 15px;
      cursor: pointer;
      border-radius: 50%;
      font-size: 16px;
      z-index: 300402;
    }

    #backToTop.show {
      opacity: 1;
    }

    table {
      border-collapse: collapse;
      width: 100%;
    }

    th,
    td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: left;
    }

    th {
      background-color: #ffad79;
      color: white;
    }

    tr:nth-child(even) {
      background-color: #f2f2f2;
    }

    .comment-item {

      align-items: center;
      border-bottom: 1px solid #ddd;
      padding: 10px 0;
    }

    .comment-item:last-child {
      border-bottom: none;
    }

    .item-image {
      width: 80px;
      height: 80px;
      object-fit: cover;
      margin-right: 15px;
    }

    .rating {
      font-weight: bold;
      margin-right: 20px;
    }

    .like-container {
      display: flex;
      align-items: center;
      margin-right: 20px;
    }

    .like-container img {
      width: 30px;
      height: 30px;
      cursor: pointer;
    }

    .comment-action img {
      width: 30px;
      height: 30px;
      cursor: pointer;
    }

    table th,
    table td {
      width: 20%;
    }
  </style>
</head>

<body>
  <h2 class="mt-4">菜品评价</h2>
  <div class="container">
    <table class="table table-striped">
      <thead>
        <tr>
          <th>菜品名称</th>
          <th>菜品图片</th>
          <th>菜品评分</th>
          <th>菜品评价</th>
          <th>操作</th>
        </tr>
      </thead>
      <tbody>
        {% for comment in comments %}
        <tr class="comment-item">
          <td>{{ comment.2 }}</td>
          <td>{{ comment.1 }}</td>
          <td class="rating">{{ comment.3 }}</td>
          <td>{{ comment.4 }}</td>
          <td>
            <div class="like-container">
              {% load static %}
              <img src="{% static 'icons/赞.svg' %}" alt="赞" width="50px" height="50px"
              onclick="toggleLike(this)">
              <span>{{ comment.6 }}</span>
            </div>
            <div class="comment-action">
              {% load static %}
              <img src="{% static 'icons/评论 (1).svg' %}" alt="评论" width="50px" height="50px">
            </div>
            <div class="comment-action">
              {% load static %}
              <img src="{% static 'icons/收藏 (1).svg' %}" alt="收藏" width="50px" height="50px">
            </div>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <a href="/add_review">
    {% load static %}
    <img src="{% static 'icons/创作.svg' %}" alt="创作">
  </a>
  <!-- 回到顶部按钮 -->
  <button id="backToTop">^</button>
  <!-- 回到顶部按钮 -->
</body>
<script>
  var backToTopButton = document.getElementById('backToTop');
  window.addEventListener('scroll', function () {
    if (window.scrollY > 200) {
      backToTopButton.style.display = 'block';
    } else {
      backToTopButton.style.display = 'none';
    }
  });

  document.getElementById('backToTop').onclick = function () {
    window.scrollTo({
      top: 0,
      behavior: 'smooth'
    });
  };


  function toggleLike(likeButton) {
        let likesCountElement = likeButton.nextElementSibling;
        let currentLikes = parseInt(likesCountElement.textContent);
        if (likeButton.classList.contains('liked')) {
            likeButton.classList.remove('liked');
            likesCountElement.textContent = currentLikes > 0? currentLikes - 1 : 0;
        } else {
            likeButton.classList.add('liked');
            likesCountElement.textContent = currentLikes + 1;
        }
    }

</script>

</html>