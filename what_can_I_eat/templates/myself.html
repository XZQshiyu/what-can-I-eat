{% extends 'base.html' %}

{% block title %}个人主页{% endblock %}

{% block content %}
{% load static %}
<style>
    /* 回到顶部 */
    #backToTop {
            display: none;
            position: fixed;
            bottom: 20px;
            right: 10px;
            background-color: rgb(182, 183, 183);
            border: none;
            color: white;
            padding: 10px 15px;
            cursor: pointer;
            border-radius: 50%;
            font-size: 16px;
            z-index: 300402;
        }

        #backToTop.show {
            opacity: 1;
        }

  .container {
    display: flex;
    justify-content: space-between;
    /* 确保头像在容器内均匀分布 */
    align-items: center;
    width: 100%;
    /* 容器占满可用宽度 */
  }

  .avatar {
    flex: 1;
    /* 每个头像占用同等的空间 */
    margin: 5px;
    /* 设置一些间距，使头像之间稍微分开 */
    background-color: #ddd;
    /* 占位符背景色 */
    background-size: cover;
    background-position: center;
  }

  /* 自定义每种尺寸的头像 */
  .avatar-xl {
    height: 200px;
  }

  .avatar-lg {
    height: 180px;
  }

  .avatar-md {
    height: 160px;
  }

  .avatar-sm {
    height: 140px;
  }

  .avatar-xs {
    height: 120px;
  }


  .datagrid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    /* 创建两列，平均分配空间 */
    gap: 20px;
    /* 设置项目之间的间距 */
    width: 100%;
    /* 占据父容器的全部宽度 */
    padding: 20px;
    /* 给内容添加适当的内边距 */
    box-sizing: border-box;
    /* 包含内边距和边框 */
  }

  .datagrid-item {
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 4px;
  }

  .datagrid-title {
    font-weight: bold;
    margin-bottom: 5px;
  }

  .datagrid-content {
    font-size: 14px;
  }
  .reply-container {
      display: flex;
      align-items: center;
      padding: 10px;
      border-bottom: 1px solid #ddd;
    }

   .reply-avatar {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      background-size: cover;
    }

   .reply-info {
      margin-left: 10px;
    }

   .reply-name {
      font-weight: bold;
    }

   .reply-content {
      font-size: 14px;
      color: #555;
    }

   .reply-icons {
      margin-left: auto;
    }

   .original-comment {
      padding: 10px;
      background-color: #f0efef;
      margin-top: 10px;
    }

    /* 操作按钮 */
    .three_button {
      display: flex;
      gap: 10px;
      padding: 10px 0;
    }

   .three_button button {
      border: none;
      background-color: transparent;
      padding: 5px;
      transition: transform 0.3s ease;
    }

   .three_button button:hover {
      transform: scale(1.1);
    }

   .image1 {
      display: block;
    }

    /* 按钮文字样式 */
   .three_button button span {
      font-size: 14px;
      margin-left: 5px;
    }

   
</style>

<div class="container">
  <div class="avatar avatar-xl" style="background-image: url('{{ user.3 }}');"></div>
  <div class="avatar avatar-lg" style="background-image: url('{{ user.3 }}');"></div>
  <div class="avatar avatar-md" style="background-image: url('{{ user.3 }}');"></div>
  <div class="avatar avatar-sm" style="background-image: url('{{ user.3 }}');"></div>
  <div class="avatar avatar-xs" style="background-image: url('{{ user.3}}');"></div>
  <div class="avatar" style="background-image: url('{{ user.3 }}'); height: 100px;"></div>
  <!-- 最小头像 -->
</div>

<div class="container">
  <div class="datagrid">
    <div class="datagrid-item">
      <div class="datagrid-title">用户名</div>
      <div class="datagrid-content">{{ user.1 }}</div>
    </div>
    <div class="datagrid-item">
      <div class="datagrid-title">个人简介</div>
      <div class="datagrid-content">{{ user.2 }}</div>
    </div>
    <div class="datagrid-item">
      <div class="datagrid-title">Edge network</div>
      <div class="datagrid-content">
        <span class="status status-green">Active</span>
      </div>
    </div>
    <div class="datagrid-item">
      <div class="datagrid-title">Avatars list</div>
      <div class="datagrid-content">
        <div class="avatar-list avatar-list-stacked">
          <span class="avatar rounded" style="background-image: url('{{ user.3 }}');"></span>
          <span class="avatar rounded" style="background-image: url('{{ user.3 }}');"></span>
          <span class="avatar rounded" style="background-image: url('{{ user.3 }}');"></span>
          <span class="avatar rounded" style="background-image: url('{{ user.3 }}');"></span>
          <span class="avatar rounded">+3</span>
        </div>
      </div>
    </div>
    <div class="datagrid-item">
      <div class="datagrid-title">Icon</div>
      <div class="datagrid-content">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon text-green" width="24" height="24" viewBox="0 0 24 24"
          stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none" />
          <path d="M5 12l5 5l10 -10" />
        </svg>
        Checked
      </div>
    </div>
  </div>
</div>
<div class="container">
  <div class="page-wrapper">
    <!-- Page title -->
    <div class="page-header d-print-none">
      <div class="row align-items-center">
        <div class="col">
          <h1 class="page-title">
            收藏、回复、评论列表
          </h1>
        </div>
      </div>
    </div>
    <div class="card">
      <!-- <div class="card-body"> -->
      <div class="accordion" id="accordion-example">
        <div class="accordion-item">
          <h2 class="accordion-header" id="heading-1">
            <button class="accordion-button " type="button" data-bs-toggle="collapse" data-bs-target="#collapse-1"
              aria-expanded="true">
              评论列表
            </button>
          </h2>
          <div id="collapse-1" class="accordion-collapse collapse show" data-bs-parent="#accordion-example">
            <div class="accordion-body pt-0">
              <div class="content">
                {% for comment in comments %}
                <div class="card mb-3">
                  <div class="card-body">
                    <div class="row">
                      <!-- 左侧部分：用户头像和用户信息 -->
                      <div class="col-md-3">
                        <span class="avatar rounded" style="background-image: url('{{ user.3 }}');"></span>
                        <div class="username">
                          <h3>用户名: </h3>
                          <p class="card-text">{{ user.1 }}</p>
                        </div>
                        <div class="dishname mt-2">
                          <h3>菜品: </h3>
                          <p class="card-text">{{ comment.2 }}</p>
                        </div>
                      </div>
                      <!-- 右侧部分：评论内容 -->
                      <div class="col-md-3">
                        <div class="text-content">
                          <h3 class="card-title">点评: </h3>
                          <p class="card-text">{{ comment.4 }}</p>
                          <!-- 星级评分 -->
                          <h3 class="card-title">评分: </h3>
                          {% if comment.8 == 1 %}
                          <span class="star-rating">★☆☆☆☆</span>
                          {% elif comment.8 == 2 %}
                          <span class="star-rating">★★☆☆☆</span>
                          {% elif comment.8 == 3 %}
                          <span class="star-rating">★★★☆☆</span>
                          {% elif comment.8 == 4 %}
                          <span class="star-rating">★★★★☆</span>
                          {% elif comment.8 == 5 %}
                          <span class="star-rating">★★★★★</span>
                          {% endif %}
                        </div>
                      </div>
                      <div class="col-md-3">
                        <!-- 发布时间 -->
                        <h3 class="card-title">发布时间: </h3>
                        <div class="post_time mt-3">{{ comment.6 }}</div>

                        <h3 class="card-title">一键三连~</h3>
                        <!-- 操作按钮 -->
                        <div class="button-row mt-3">
                          <button class="btn btn-outline-primary">
                            {% load static %}
                            <img src="{% static 'icons/赞 (1) copy.svg' %}" alt="赞" width="30px" height="30px"
                              onclick="toggleLike(this)" class="image1">
                            <span>{{ comment.7 }}</span>
                          </button>
                          <button class="btn btn-outline-secondary">
                            {% load static %}
                            <img src="{% static 'icons/评论 (1).svg' %}" alt="评论" width="30px" height="30px"
                              onclick="showCommentOptions(this)" class="image1">
                          </button>
                          <button class="btn btn-outline-warning">
                            {% load static %}
                            <img src="{% static 'icons/收藏.svg' %}" alt="收藏" width="30px" height="30px" class="image1">
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                {% endfor %}
              </div>
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <h2 class="accordion-header" id="heading-2">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
              data-bs-target="#collapse-2" aria-expanded="false">
              回复列表
            </button>
          </h2>
          <div id="collapse-2" class="accordion-collapse collapse" data-bs-parent="#accordion-example">
            <div class="accordion-body pt-0">
              <div class="content">
                {% for reply in reply_list %}
                <div class="reply-container">
                  <div class="reply-avatar" style="background-image: url('{{ reply.4 }}');"></div>
                  <div class="reply-info">
                    <div class="reply-name">{{ reply.3 }}</div>
                    <div class="reply-content">{{ reply.8 }}</div>
                  </div>
                  <div class="reply-icons">
                    <button class="like-button">
                      {% load static %}
                      <img src="{% static 'icons/赞 (1) copy.svg' %}" alt="赞" width="20px" height="20px">
                      <span>{{ reply.10 }}</span>
                    </button>
                    <div class="text-muted">{{ reply.9 }}</div>
                  </div>
                </div>
                <div class="original-comment">
               
                  <img src="{{ reply.1 }}" style="width: 100px; height: auto;" alt="Card side image">
                  <p>{{ reply.2 }}</p>
                   <!-- 操作按钮 -->
                <div class="three_button">
                  <button class="btn btn-outline-primary">
                    {% load static %}
                    <img src="{% static 'icons/赞 (1) copy.svg' %}" alt="赞" width="30px" height="30px" onclick="toggleLike(this)"
                      class="image1">
                    <span>{{ reply.12 }}</span>
                  </button>
                  <button class="btn btn-outline-secondary">
                    {% load static %}
                    <img src="{% static 'icons/评论 (1).svg' %}" alt="评论" width="30px" height="30px" class="image1">
                  </button>
                  <button class="btn btn-outline-warning">
                    {% load static %}
                    <img src="{% static 'icons/收藏.svg' %}" alt="收藏" width="30px" height="30px" class="image1">
                  </button>
                </div>
                <div>{{ reply.11 }}</div>
                </div>
               
                {% endfor %}


              </div>
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <h2 class="accordion-header" id="heading-3">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
              data-bs-target="#collapse-3" aria-expanded="false">
              收藏列表
            </button>
          </h2>
          <div id="collapse-3" class="accordion-collapse collapse" data-bs-parent="#accordion-example">
            <div class="accordion-body pt-0">
              sdasd
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
   <!-- 回到顶部按钮 -->
   <button id="backToTop">^</button>
   <!-- 回到顶部按钮 -->

<script>
  var backToTopButton = document.getElementById('backToTop');
  window.addEventListener('scroll', function () {
    if (window.scrollY > 200) {
      backToTopButton.style.display = 'block';
    } else {
      backToTopButton.style.display = 'none';
    }
  });

  document.getElementById('backToTop').onclick = function () {
    // 以较快的速度滚动到页面顶部
    let scrollStep = -92000; // 每次滚动的像素值，可根据需要调整
    let scrollInterval = setInterval(() => {
      if (window.scrollY !== 0) {
        window.scrollBy(0, scrollStep);
      } else {
        clearInterval(scrollInterval);
      }
    }, 1);
  };


  function toggleLike(likeButton) {
    let likesCountElement = likeButton.nextElementSibling;
    let currentLikes = parseInt(likesCountElement.textContent);
    if (likeButton.classList.contains('liked')) {
      likeButton.classList.remove('liked');
      likesCountElement.textContent = currentLikes > 0 ? currentLikes - 1 : 0;
      likeButton.style.transform = 'scale(1)';
    } else {
      likeButton.classList.add('liked');
      likesCountElement.textContent = currentLikes + 1;
      likeButton.style.transform = 'scale(1.2)';
      setTimeout(() => {
        likeButton.style.transform = 'scale(1)';
      }, 200);
    }
  }
</script>
{% endblock %}